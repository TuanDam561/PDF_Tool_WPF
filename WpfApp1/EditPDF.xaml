<Window x:Class="WpfApp1.EditPDF"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PDF Editor"
        Width="1200"
        Height="700"
        WindowStartupLocation="CenterScreen"
        Background="#EDEDED">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ================= LEFT TOOL PANEL ================= -->
        <Border Grid.Column="0"
                Background="#F4F6F8"
                Padding="15">

            <StackPanel>

                <TextBlock Text="PDF TOOL"
                           FontSize="18"
                           FontWeight="Bold"
                           Margin="0,0,0,15"/>

                <Button Content="📂 Mở PDF"
                        Height="40"
                        Margin="0,5"
                        Click="OpenPdf_Click"/>

                <Separator Margin="0,10"/>

                <Button Content="🔄 Xoay trang"
                        Margin="0,5"
                        Height="34"
                        Click="Rotate_Click"/>

                <Button Content="❌ Xoá trang"
                        Margin="0,5"
                         Height="34"
                        Click="Delete_Click"/>

                <Button Content="⬆️ Lên trên"
                        Margin="0,5"
                        Height="34"
                        Click="MoveUp_Click"/>  

                <Button Content="⬇ Xuống dưới"
                        Margin="0,5"
                        Height="34"
                        Click="MoveDown_Click"/>

                <Button Content="⬅️Sang trái"
                        Margin="0,5"
                        Height="34"
                        Click="MoveLeft_Click"/>

                <Button  Content="→ Sang phải"
                        Margin="0,5"
                        Height="34"
                        Click="MoveRight_Click"/>

               

                <Separator Margin="0,15"/>

                <Button Content="💾 Lưu PDF"
                        Height="42"
                        Background="#E5322D"
                        Foreground="White"
                        FontWeight="Bold"
                        Click="Save_Click"/>

                <TextBlock x:Name="StatusText"
                           Margin="0,15,0,0"
                           Foreground="Gray"
                           TextWrapping="Wrap"/>

            </StackPanel>
        </Border>

        <!-- ================= PDF PAGES AREA ================= -->
        <ScrollViewer Grid.Column="1"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled">

            <ItemsControl x:Name="PagesControl"
                          Margin="15">

                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>

                        <Border Margin="10"
                                Padding="6"
                                Background="White"
                                Cursor="Hand"
                                MouseLeftButtonDown="Page_Click">

                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderThickness" Value="2"/>
                                    <Setter Property="BorderBrush" Value="#CCCCCC"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                            <Setter Property="BorderBrush" Value="#1E88E5"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>

                            <Grid>

                                <!-- PDF IMAGE PREVIEW -->
                                <Image Source="{Binding PageImage}"
                                       Width="180"
                                       Stretch="Uniform"/>

                                <!-- OVERLAY CANVAS (vẽ, watermark) -->
                                <Canvas Width="180"
                                        Height="{Binding OverlayHeight}"
                                        Background="Transparent"/>

                                <!-- PAGE NUMBER -->
                                <Border Background="#AA000000"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Margin="4"
                                        Padding="4">
                                    <TextBlock Text="{Binding PageNumber}"
                                               Foreground="White"
                                               FontSize="11"/>
                                </Border>

                            </Grid>
                        </Border>

                    </DataTemplate>
                </ItemsControl.ItemTemplate>

            </ItemsControl>
        </ScrollViewer>

    </Grid>
</Window>
