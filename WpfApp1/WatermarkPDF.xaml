<Window x:Class="WpfApp1.WatermarkPDF"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="Thêm dấu chìm vào PDF"
        Height="770"
        Width="1500"
        WindowStartupLocation="CenterScreen"
        Background="#F4F6F8">

    <Grid Margin="20">
        <!-- ===== GRID TỔNG ===== -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Header -->
            <RowDefinition Height="*"/>
            <!-- Content -->
            <RowDefinition Height="Auto"/>
            <!-- Footer -->
        </Grid.RowDefinitions>

        <!-- ===== HEADER ===== -->
        <TextBlock Grid.Row="0"
                   Text="Thêm dấu chìm vào PDF"
                   FontSize="26"
                   FontWeight="Bold"
                   Foreground="#2C3E50"
                   Margin="0,0,0,15"/>

        <!-- ===== CONTENT ===== -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- ===== BÊN TRÁI ===== -->
            <Border Grid.Column="0"
                    Background="White"
                    CornerRadius="8"
                    Padding="15"
                    Margin="0,0,15,0">

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- NÚT CHỌN PDF -->
                    <Button Content="Chọn PDF"
                            Height="40"
                            Width="140"
                            HorizontalAlignment="Left"
                            Background="#E74C3C"
                            Foreground="White"
                            FontSize="14"
                            BorderThickness="0"
                            Click="SelectPdf_Click"
                           />

                    <!-- WEBVIEW2 HIỂN THỊ PDF -->
                    <Border Grid.Row="1"
                            Margin="0,15,0,0"
                            BorderBrush="#DDD"
                            BorderThickness="1"
                            CornerRadius="6">

                        <wv2:WebView2 x:Name="PdfViewer"/>
                    </Border>
                </Grid>
            </Border>

            <!-- ===== BÊN PHẢI ===== -->
            <Border Grid.Column="1"
                    Background="White"
                    CornerRadius="8"
                    Padding="20">

                <TabControl  SelectedIndex="{Binding SelectedTabIndex, Mode=TwoWay}">
                    <!-- TAB CHÈN CHỮ -->
                    <TabItem Header="Chèn chữ" FontWeight="Bold">
                        <StackPanel Margin="10">
                            <TextBlock Text="Nội dung chữ đóng dấu"/>
                            <TextBox x:Name="inputSign"
                                     Height="32"
                                     Margin="0,5,0,15"
                                     Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}"/>


                                <TextBlock Text="Cỡ chữ"/>

                                <Grid Margin="0,5,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="60"/>
                                    </Grid.ColumnDefinitions>

                                    <Slider Minimum="10"
                                            Maximum="100"
                                            Value="{Binding FontSize, Mode=TwoWay}"/>
                                    <TextBox Grid.Column="1"
                                             Margin="10,0,0,0"
                                             Text="{Binding FontSize, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             VerticalContentAlignment="Center"/>
                                </Grid>

                                <TextBlock Text="Độ trong suốt"/>

                                <Grid Margin="0,5,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="60"/>
                                    </Grid.ColumnDefinitions>

                                    <Slider Minimum="0"
                                            Maximum="255"
                                            Value="{Binding TextOpacity, Mode=TwoWay}"/>

                                    <TextBox Grid.Column="1"
                                             Margin="10,0,0,0"
                                             Text="{Binding TextOpacity, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             VerticalContentAlignment="Center"/>
                                </Grid>

                                <TextBlock Text="Góc xoay (°)"/>

                            <Grid Margin="0,5,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="60"/>
                                </Grid.ColumnDefinitions>

                                <Slider Minimum="-90"
                                            Maximum="90"
                                            Value="{Binding TextRotation, Mode=TwoWay}"/>

                                <TextBox Grid.Column="1"
                                             Margin="10,0,0,0"
                                             Text="{Binding TextRotation, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             VerticalContentAlignment="Center"/>
                            </Grid>

                            <CheckBox x:Name="ApplyAll"
                                      Content="Áp dụng cho tất cả các trang"
                                      Margin="0,10,0,0"
                                      Checked="permissionOnly_Checked" 
                                      Unchecked="permissionOnly_Unchecked"
                                      IsChecked="{Binding ApplyToAllPages, Mode=TwoWay}"/>
                          

                            <StackPanel Orientation="Horizontal" Margin="0,10,0,0" >
                                <TextBlock Text="Từ trang:" VerticalAlignment="Center"/>
                                <TextBox x:Name="pageFrom"
                                         Width="60"
                                         Margin="8,0,10,0"
                                         VerticalContentAlignment="Center"
                                         Text="{Binding PageFrom, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                <TextBlock Text="Đến trang:" VerticalAlignment="Center"/>
                                <TextBox x:Name="pageTo"
                                         Width="60"
                                         Margin="8,0,0,0"
                                         VerticalContentAlignment="Center"
                                         Text="{Binding PageTo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
                            </StackPanel>
                        </StackPanel>
                    </TabItem>

                    <!-- TAB CHÈN ẢNH -->
                    <TabItem Header="Chèn ảnh"  FontWeight="Bold">
                        <StackPanel Margin="10">
                            <Button Content="Chọn ảnh"
                                    Width="150"
                                    Height="35"
                                    Background="#3498DB"
                                    Foreground="White"
                                    BorderThickness="0"
                                    Click="SelectImage_Click"/>

                            <Border Height="180"
                                    Margin="0,15,0,15"
                                    BorderBrush="#DDD"
                                    BorderThickness="1"
                                    CornerRadius="6">
                                <Image x:Name="imageSign"
                                       Stretch="Uniform"
                                       Source="{Binding ImagePath}"/>
                            </Border>

                            <TextBlock Text="Tỷ lệ ảnh"/>

                            <Grid Margin="0,5,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="60"/>
                                </Grid.ColumnDefinitions>

                                <Slider Minimum="0.1"
                                        Maximum="1"
                                        SmallChange="0.1"
                                        Value="{Binding ImageScale, Mode=TwoWay}"/>

                                <TextBox Grid.Column="1"
                                         Margin="10,0,0,0"
                                         Text="{Binding ImageScale, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         VerticalContentAlignment="Center"/>
                            </Grid>

                            <TextBlock Text="Góc xoay ảnh (°)"/>

                            <Grid Margin="0,5,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="60"/>
                                </Grid.ColumnDefinitions>

                                <Slider Minimum="-180"
                                        Maximum="180"
                                        Value="{Binding ImageRotation, Mode=TwoWay}"/>

                                <TextBox Grid.Column="1"
                                         Margin="10,0,0,0"
                                         Text="{Binding ImageRotation, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         VerticalContentAlignment="Center"/>
                            </Grid>
                            <CheckBox x:Name="ApplyAlll"
                                      Content="Áp dụng cho tất cả các trang"
                                      Margin="0,10,0,0"
                                      Checked="permissionOnly_Checked" 
                                      Unchecked="permissionOnly_Unchecked"
                                      IsChecked="{Binding ApplyToAllPages, Mode=TwoWay}"/>
                            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                <TextBlock Text="Từ trang:" VerticalAlignment="Center"/>
                                <TextBox x:Name="pageFrom2"
                                         Width="60"
                                         Margin="8,0,10,0"
                                         VerticalContentAlignment="Center"
                                          Text="{Binding PageFrom, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                <TextBlock Text="Đến trang:" VerticalAlignment="Center"/>
                                <TextBox x:Name="pageTo2"
                                         Width="60"
                                         Margin="8,0,0,0"
                                         VerticalContentAlignment="Center"
                                         Text="{Binding PageTo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                        </StackPanel>
                    </TabItem>
                </TabControl>
            </Border>
        </Grid>

        <!-- ===== FOOTER ===== -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,15,0,0">
            <Button Content="Thêm watermark"
                    Height="45"
                    Width="200"
                    Background="#27AE60"
                    Foreground="White"
                    FontSize="15"
                    BorderThickness="0"
                    Click="AddWatermark_Click"/>
        </StackPanel>
    </Grid>
</Window>